<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.76 [en] (Windows NT 5.0; U) [Netscape]">
   <title>XML ControlFlow -- Functional Description</title>
<style media="screen" type="text/css"><!--
.fixme { color: red }
--></style>
</head>
<body bgcolor="#FFFFFF">
<h3> 
  <hr width="100%" noshade>
</h3>
<h2> XML Control Flow Tags &#151; Functional Description <br>
</h2>
<h2> <tt>&lt;x:forEach></tt><tt><br>
  &lt;x:if&gt;<br>
  &lt;x:choose&gt; &lt;x:when&gt; &lt;x:otherwise&gt; <br>
  </tt></h2>
<hr width="100%" noshade>
<h3>1. Introduction</h3>
<p>The core set of XML tags provides the basic functionality to easily parse and 
  access XML data. Another important piece of functionality is the ability to 
  iterate over elements in an XML document, as well as conditionally process JSP 
  code fragments depending on the result of an XPath expression. The actions presented 
  in this document provide these capabilities.</p>
<h3>2. &lt;forEach&gt;</h3>
<p>The &lt;forEach&gt; action evaluates the given XPath expression and iterates 
  over the result, setting the context node to each element in the iteration. 
  For example:</p>
<blockquote>
  <p><code>&lt;x:forEach select=&quot;$doc//author&quot;&gt;<br>
    &nbsp;&nbsp;&lt;x:valueOf select=&quot;@name&quot;&gt;<br>
    &lt;/x:forEach&gt; </code></p>
</blockquote>
<p>Optional attribute &quot;var&quot; makes it possible to save the current context 
  node of the iteration in a JSP &quot;page&quot; attribute. The exported object 
  has nested visibility. It is illegal to specify any scope other than &quot;page&quot; 
  for &quot;var&quot;.</p>
<h3>3. <tt>&lt;if></tt></h3>
<p>The <tt>&lt;if></tt> action has a &quot;select&quot; attribute that specifies 
  an XPath expression. The expression is evaluated and the resulting object is 
  converted to a boolean according to the <a href="#XpathBooleanFunction">semantics 
  of the XPath boolean function</a>. The tag renders its body if the result is 
  true. For example:</p>
<blockquote>
  <p><code>&lt;x:if select=&quot;$customer/[location='UK']&quot;&gt;<br>
    &nbsp;&nbsp;UK based<br>
    &lt;/x:if&gt;</code>
</blockquote>
<h3>4. <tt>&lt;choose> &lt;when&gt; &lt;otherwise&gt;</tt></h3>
<p>The <tt>&lt;choose></tt> action selects one among a number of possible alternatives. 
  It consists of a sequence of &lt;x:when&gt; elements followed by an optional 
  &lt;x:otherwise&gt;. Each &lt;x:when&gt; element has a single attribute, select, 
  which specifies an XPath expression. When a &lt;x:choose&gt; element is processed, 
  each of the &lt;x:when&gt; elements has its expression evaluated in turn, and 
  the resulting object is converted to a boolean according to the <a href="#XpathBooleanFunction">semantics 
  of the XPath boolean function</a>. The body of the first, and only the first, 
  &lt;x:when&gt; whose result is true is rendered. </p>
<p>If none of the test conditions of nested <tt>&lt;when></tt> tags evaluates 
  to true, then the body of an <tt>&lt;otherwise></tt> tag is evaluated, if present. 
</p>
<blockquote> 
  <p><code>&lt;x:choose&gt;<br>
    &nbsp;&nbsp;&lt;x:when test=&quot;$customer/firstName&quot;&gt;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Hello &lt;xtags:valueOf select=&quot;$customer/firstName&quot;/&gt;<br>
    &nbsp;&nbsp;&lt;/x:when&gt;<br>
    &nbsp; &lt;x:otherwise&gt;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Hello there friend<br>
    &nbsp;&nbsp;&lt;/x:otherwise&gt;<br>
    &lt;/x:choose&gt;</code></p>
</blockquote>
<h3><a name="XpathBooleanFunction"></a>5. XPath &quot;boolean&quot; function</h3>
<p>As specified in the XPath spec, the boolean function converts its arguments 
  to a boolean as follows:</p>
<ul>
  <li>a number is true if an only if it is neither positive or negative zero nor 
    NaN</li>
  <li>a node-set is true if and only if it is non-empty</li>
  <li>a string is true if and only if its lenght is non-zero</li>
</ul>
<h3>6. Summary</h3>
<table border="1" cellpadding="5" width="100%">
  <tr> 
    <td colspan="2" bgcolor="#000099"><b><font color="#FFFFFF" size="+1">XML Control 
      Flow Tags</font></b></td>
  </tr>
  <tr bgcolor="#FFFF66"> 
    <td width="55%"><b>Element</b></td>
    <td width="45%"><b>Sample usage</b></td>
  </tr>
  <tr> 
    <td width="55%"><code><b>&lt;forEach&gt;</b></code><br>
      <b>&nbsp;select</b> var<br>
      <br>
      Evaluates the given XPath expression and iterates over the result, setting 
      the context node to each element in the iteration.</td>
    <td width="45%"><code>&lt;x:forEach select=&quot;$doc//author&quot;&gt;<br>
      &nbsp;&nbsp;&lt;x:valueOf select=&quot;@name&quot;&gt;<br>
      &lt;/x:forEach&gt; </code></td>
  </tr>
  <tr> 
    <td width="55%"> 
      <p><code><b>&lt;if&gt; <br>
        &nbsp;select<br>
        </b></code><br>
        Simple conditional tag, which evalutes its body if the supplied Xpath 
        expression evaluates to true (as if by a call to the XPath &quot;boolean&quot; 
        function).</p>
    </td>
    <td width="45%"><code>&lt;x:if select=&quot;$customer/[location='UK']&quot;&gt;<br>
      &nbsp;&nbsp;UK based<br>
      &lt;/x:if&gt;</code> </td>
  </tr>
  <tr> 
    <td width="55%"> 
      <p><code><b>&lt;choose&gt;<br>
        </b></code><code><b>&lt;when&gt; <br>
        &nbsp;select</b><b><br>
        &lt;otherwise&gt;</b></code><br>
        <br>
        Simple conditional tag that establishes a context for mutually exclusive 
        conditional operations, marked by<code> &lt;when&gt;</code> and<code> 
        &lt;otherwise&gt;.</code></p>
    </td>
    <td width="45%"><code>&lt;x:choose&gt;</code><code><br>
      &nbsp;&nbsp;&lt;x:when select=&quot;...&quot;&gt;<br>
      &nbsp;&nbsp;&nbsp;&nbsp;...<br>
      &nbsp;&nbsp;&lt;/x:when&gt; </code><code><br>
      &nbsp;&nbsp;&lt;x:when select=&quot;...&quot;&gt;<br>
      &nbsp;&nbsp;&nbsp;&nbsp;...<br>
      &nbsp;&nbsp;&lt;/x:when&gt; </code><code><br>
      &nbsp;&nbsp;...<br>
      &nbsp;&nbsp;&lt;x:otherwise&gt;<br>
      &nbsp;&nbsp;&nbsp;&nbsp;...<br>
      &nbsp;&nbsp;&lt;/x:otherwise&gt; </code><code></code><code> </code><code> 
      <br>
      &lt;/x:choose&gt; </code></td>
  </tr>
</table>
<h3>&nbsp;</h3>
</body>
</html>
